---
phase: 05.5-resto360-lite
plan: 04
type: execute
wave: 2
depends_on: ["05.5-01"]
files_modified:
  - apps/web/app/[locale]/lite/layout.tsx
  - apps/web/app/[locale]/lite/dashboard/page.tsx
  - apps/web/app/[locale]/lite/menu/page.tsx
  - apps/web/app/[locale]/lite/qr/page.tsx
  - apps/web/components/lite/LiteSidebar.tsx
  - apps/web/components/lite/LiteHeader.tsx
  - apps/web/components/lite/MenuEditor.tsx
  - apps/web/components/lite/CategoryCard.tsx
  - apps/web/components/lite/MenuItemCard.tsx
  - apps/web/components/lite/UpgradePrompt.tsx
  - apps/web/messages/fr.json
  - apps/web/messages/en.json
autonomous: true

must_haves:
  truths:
    - "Owner can access Lite dashboard after login"
    - "Dashboard shows overview with upgrade prompts"
    - "Menu editor allows CRUD on categories and items"
    - "QR codes page shows multiple download options"
    - "Free tier shows RESTO360 branding prompts"
  artifacts:
    - path: "apps/web/app/[locale]/lite/dashboard/page.tsx"
      provides: "Lite dashboard overview"
      min_lines: 40
    - path: "apps/web/app/[locale]/lite/menu/page.tsx"
      provides: "Standalone menu editor"
      min_lines: 60
    - path: "apps/web/components/lite/MenuEditor.tsx"
      provides: "Menu CRUD interface"
      contains: "MenuItem"
  key_links:
    - from: "apps/web/app/[locale]/lite/menu/page.tsx"
      to: "/api/menu/categories/"
      via: "fetch"
      pattern: "fetch.*categories"
    - from: "apps/web/components/lite/MenuEditor.tsx"
      to: "/api/menu/items/"
      via: "CRUD operations"
      pattern: "fetch.*items"
---

<objective>
Create Lite dashboard with overview, standalone menu editor, and QR codes page for free tier users.

Purpose: Provide a simplified management interface for Lite users that focuses on menu management without POS complexity, with strategic upgrade prompts.

Output: Protected /lite/ routes with dashboard overview, full-featured menu editor (create/edit/delete categories and items), QR code management page, and upgrade prompts for Pro tier.
</objective>

<execution_context>
@C:\Users\dell\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dell\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05.5-resto360-lite/05.5-CONTEXT.md
@.planning/phases/05.5-resto360-lite/05.5-01-SUMMARY.md

# Existing menu API
@apps/api/apps/menu/views.py
@apps/api/apps/menu/serializers.py
# Existing POS menu grid for reference
@apps/web/app/[locale]/pos/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Lite layout and navigation components</name>
  <files>
    apps/web/app/[locale]/lite/layout.tsx
    apps/web/components/lite/LiteSidebar.tsx
    apps/web/components/lite/LiteHeader.tsx
    apps/web/components/lite/UpgradePrompt.tsx
  </files>
  <action>
Create layout and navigation for Lite dashboard:

**layout.tsx:**
- Protected layout (redirect to /register if not authenticated)
- Check plan_type from user context
- If plan_type === 'full', redirect to main /pos dashboard
- Render LiteSidebar + LiteHeader + children
- Mobile-responsive: sidebar collapses to hamburger menu

**LiteSidebar.tsx:**
- Navigation links:
  - Dashboard (overview) - /lite/dashboard
  - Menu Editor - /lite/menu
  - QR Codes - /lite/qr
  - Settings - /lite/settings (placeholder for now)
- Active state highlighting (emerald)
- Upgrade to Pro button at bottom
- RESTO360 logo at top

**LiteHeader.tsx:**
- Restaurant name display
- Plan badge (Free/Pro)
- User dropdown (profile, logout)
- Mobile hamburger menu toggle

**UpgradePrompt.tsx:**
- Reusable upgrade call-to-action component
- Props: variant ('banner' | 'card' | 'inline')
- Banner variant: Full-width, dismissible
- Card variant: Boxed with feature highlights
- Inline variant: Simple text with link
- All link to /lite/upgrade or pricing page

Styling:
- Sidebar: White background, gray-50 active states, emerald accents
- Header: White with subtle shadow
- Match emerald/teal color scheme
  </action>
  <verify>
    ls apps/web/app/[locale]/lite/
    ls apps/web/components/lite/
  </verify>
  <done>
    Lite layout with sidebar navigation, header, and reusable upgrade prompt component.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create dashboard overview and QR codes pages</name>
  <files>
    apps/web/app/[locale]/lite/dashboard/page.tsx
    apps/web/app/[locale]/lite/qr/page.tsx
    apps/web/messages/fr.json
    apps/web/messages/en.json
  </files>
  <action>
**dashboard/page.tsx:**
Overview page with:
- Welcome message with restaurant name
- Stats cards (placeholders for now - will be wired in Plan 05):
  - Menu views today
  - Menu views this week
  - Menu views this month
  - Total menu items
- Quick actions:
  - "Edit Menu" -> /lite/menu
  - "Download QR Code" -> /lite/qr
  - "View Live Menu" -> /menu/{slug} (opens in new tab)
- Upgrade prompt (card variant) if plan_type === 'free'

**qr/page.tsx:**
QR code management page:
- Large QR code preview (pointing to /menu/{slug})
- Download buttons:
  - PNG: Small (200px), Medium (400px), Large (800px), Print (1200px)
  - SVG option
- Preview of live menu link
- Copy link button
- Instructions for printing and display
- Upgrade prompt: "Remove RESTO360 branding with Pro"

QR code generation:
- Use existing QR utility from Phase 2 (apps/api/apps/qr/)
- Or generate client-side using qrcode library
- Include restaurant slug in URL

**Translations:**
```json
"lite": {
  "sidebar": {
    "dashboard": "Dashboard",
    "menu": "Menu Editor",
    "qr": "QR Codes",
    "settings": "Settings",
    "upgrade": "Upgrade to Pro"
  },
  "dashboard": {
    "welcome": "Welcome, {{name}}",
    "stats": {
      "views_today": "Views today",
      "views_week": "Views this week",
      "views_month": "Views this month",
      "menu_items": "Menu items"
    },
    "quick_actions": {
      "edit_menu": "Edit Menu",
      "download_qr": "Download QR Code",
      "view_menu": "View Live Menu"
    }
  },
  "qr": {
    "title": "Your QR Codes",
    "download": "Download",
    "sizes": {
      "small": "Small (200px)",
      "medium": "Medium (400px)",
      "large": "Large (800px)",
      "print": "Print Quality (1200px)",
      "svg": "SVG (Vector)"
    },
    "copy_link": "Copy menu link",
    "copied": "Copied!",
    "instructions": "Print this QR code and display it in your restaurant. Customers scan to view your menu instantly."
  },
  "upgrade": {
    "title": "Upgrade to Pro",
    "description": "Remove RESTO360 branding and customize your menu colors",
    "cta": "Go Pro - $10/month",
    "features": [
      "Custom branding",
      "Custom colors",
      "Priority support"
    ]
  }
}
```
  </action>
  <verify>
    npm run build --prefix apps/web
  </verify>
  <done>
    Dashboard overview page with stats placeholders and QR codes page with download options.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create standalone menu editor</name>
  <files>
    apps/web/app/[locale]/lite/menu/page.tsx
    apps/web/components/lite/MenuEditor.tsx
    apps/web/components/lite/CategoryCard.tsx
    apps/web/components/lite/MenuItemCard.tsx
  </files>
  <action>
Create full-featured menu editor (NOT the POS menu grid - this is an editor):

**menu/page.tsx:**
- Fetch categories and items from /api/menu/categories/ and /api/menu/items/
- Render MenuEditor component
- Handle loading and error states

**MenuEditor.tsx:**
- Main editor interface
- Category list on left (or top on mobile)
- Items grid on right (filtered by selected category)
- Add category button
- Add item button (in selected category)
- Drag-and-drop reordering (optional, can use display_order)

**CategoryCard.tsx:**
- Category name display
- Edit button (inline edit or modal)
- Delete button (with confirmation)
- Item count badge
- Click to select/filter items

**MenuItemCard.tsx:**
- Item image (or placeholder)
- Item name and price
- Availability toggle
- Edit button -> opens edit modal/form
- Delete button (with confirmation)
- Shows "SOLD OUT" badge if is_available=false

Edit forms (can be modals or slide-overs):
- Category: name, display_order
- Item: name, price, description, image upload, category selection, availability

API integration:
- GET /api/menu/categories/ - list categories
- POST /api/menu/categories/ - create category
- PATCH /api/menu/categories/{id}/ - update category
- DELETE /api/menu/categories/{id}/ - delete category
- GET /api/menu/items/ - list items
- POST /api/menu/items/ - create item (with image upload)
- PATCH /api/menu/items/{id}/ - update item
- DELETE /api/menu/items/{id}/ - delete item

Use existing TenantContextMixin pattern - API already scopes to authenticated user's restaurant.

Image upload:
- Use FormData for multipart/form-data
- Show preview before upload
- Compress/resize client-side if needed
  </action>
  <verify>
    npm run build --prefix apps/web
  </verify>
  <done>
    Menu editor page with full CRUD for categories and items, image upload, availability toggle.
  </done>
</task>

</tasks>

<verification>
1. /lite/dashboard loads with stats placeholders
2. /lite/menu shows categories and items
3. Can create new category
4. Can create new item with image
5. Can edit existing item
6. Can delete item (with confirmation)
7. Can toggle item availability
8. /lite/qr shows QR code with download options
9. QR code downloads as PNG in selected size
10. Upgrade prompts display for free tier users
</verification>

<success_criteria>
- Lite dashboard accessible at /lite/dashboard
- Menu editor supports full CRUD on categories and items
- Image upload works for menu items
- QR codes downloadable in multiple sizes
- Navigation works across all Lite pages
- Upgrade prompts appear strategically
- Mobile-responsive layout
</success_criteria>

<output>
After completion, create `.planning/phases/05.5-resto360-lite/05.5-04-SUMMARY.md`
</output>
