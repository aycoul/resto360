---
phase: 05.5-resto360-lite
plan: 03
subsystem: ui
tags: [next.js, react, onboarding, qrcode, registration, wizard]

# Dependency graph
requires:
  - phase: 05.5-01
    provides: Public registration API endpoint, JWT token flow
provides:
  - Registration page with form validation
  - 4-step onboarding wizard (details, category, menu item, QR code)
  - Onboarding state management with localStorage persistence
  - QR code generation and download
affects: [05.5-04, 05.5-05]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Multi-step wizard with useOnboarding hook for state management
    - localStorage persistence for onboarding progress resumption
    - QR code generation with qrcode library
    - Step components with API integration per step

key-files:
  created:
    - apps/web/app/[locale]/register/page.tsx
    - apps/web/app/[locale]/onboarding/page.tsx
    - apps/web/components/onboarding/StepIndicator.tsx
    - apps/web/components/onboarding/RestaurantDetailsStep.tsx
    - apps/web/components/onboarding/CategoryStep.tsx
    - apps/web/components/onboarding/MenuItemStep.tsx
    - apps/web/components/onboarding/QRCodeStep.tsx
    - apps/web/lib/hooks/useOnboarding.ts
  modified:
    - apps/web/messages/fr.json
    - apps/web/messages/en.json

key-decisions:
  - "sessionStorage for JWT tokens and onboarding restaurant data"
  - "localStorage for onboarding progress persistence across sessions"
  - "useOnboarding hook manages wizard state with step completion tracking"
  - "QR code generation using qrcode library with emerald-600 color"

patterns-established:
  - "Onboarding wizard pattern: StepIndicator + conditional step rendering"
  - "Form submission with inline error display and loading states"
  - "QR code download in multiple sizes (200px, 400px, 800px)"

# Metrics
duration: 9min
completed: 2026-02-04
---

# Phase 5.5 Plan 03: Registration and Onboarding Summary

**Registration page with form validation and 4-step onboarding wizard guiding users from signup to live QR menu**

## Performance

- **Duration:** 9 minutes
- **Started:** 2026-02-04T09:27:07Z
- **Completed:** 2026-02-04T09:36:28Z
- **Tasks:** 3
- **Files modified:** 10

## Accomplishments

- Registration page with full form validation (required fields, password match, email format)
- 4-step onboarding wizard: Details, Category, Menu Item, QR Code
- QR code generation with download in 3 sizes and print functionality
- Onboarding state persistence in localStorage for resumption if interrupted

## Task Commits

Each task was committed atomically:

1. **Task 1: Create registration page** - `1020d08` (feat)
2. **Task 2: Create onboarding step components** - `faf7496` (feat)
3. **Task 3: Compose onboarding page** - `5528b6a` (feat)

## Files Created/Modified

- `apps/web/app/[locale]/register/page.tsx` - Registration form with validation and API integration
- `apps/web/app/[locale]/onboarding/page.tsx` - Onboarding wizard page composition
- `apps/web/components/onboarding/StepIndicator.tsx` - Visual progress indicator (4 steps)
- `apps/web/components/onboarding/RestaurantDetailsStep.tsx` - Restaurant info form
- `apps/web/components/onboarding/CategoryStep.tsx` - Category creation form
- `apps/web/components/onboarding/MenuItemStep.tsx` - Menu item creation form
- `apps/web/components/onboarding/QRCodeStep.tsx` - QR code display and download
- `apps/web/lib/hooks/useOnboarding.ts` - Wizard state management hook
- `apps/web/messages/fr.json` - French translations for register, lite, onboarding
- `apps/web/messages/en.json` - English translations for register, lite, onboarding

## Decisions Made

- **Token storage:** sessionStorage for JWT tokens (access + refresh) and onboarding restaurant data
- **Progress persistence:** localStorage for onboarding state to allow resumption
- **QR colors:** emerald-600 (#059669) for QR code dark modules to match brand
- **Step flow:** Skip allowed on step 1 (details can be completed later)

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Added missing lite translations for dashboard components**
- **Found during:** Task 1 (build verification)
- **Issue:** LiteSidebar and LiteHeader components reference lite.sidebar and lite.header translations which were missing
- **Fix:** Added lite namespace to both fr.json and en.json with sidebar (dashboard, menu, qrCodes, settings, upgradeToPro) and header (freePlan, proPlan, fullPlan, profile, logout) keys
- **Files modified:** apps/web/messages/fr.json, apps/web/messages/en.json
- **Committed in:** 1020d08 (Task 1 commit)

---

**Total deviations:** 1 auto-fixed (blocking)
**Impact on plan:** Auto-fix was necessary for build to succeed. Translations were required for existing lite components created in 05.5-04.

## Issues Encountered

None - plan executed smoothly after adding missing translations.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Registration and onboarding flow complete
- Users can now sign up and set up their first menu
- Ready for 05.5-04 (Menu Builder Dashboard) which provides full menu management
- QR code links to /menu/{slug} which requires public menu page (completed in prior phases)

---
*Phase: 05.5-resto360-lite*
*Completed: 2026-02-04*
