---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - apps/api/manage.py
  - apps/api/config/__init__.py
  - apps/api/config/settings/__init__.py
  - apps/api/config/settings/base.py
  - apps/api/config/settings/development.py
  - apps/api/config/settings/production.py
  - apps/api/config/settings/testing.py
  - apps/api/config/urls.py
  - apps/api/config/wsgi.py
  - apps/api/config/asgi.py
  - apps/api/requirements/base.txt
  - apps/api/requirements/development.txt
  - apps/api/requirements/production.txt
  - apps/api/requirements/testing.txt
  - apps/api/pytest.ini
  - apps/api/conftest.py
  - .gitignore
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Django project runs with `python manage.py runserver`"
    - "pytest discovers and runs tests successfully"
    - "ruff lint passes with no errors"
    - "Environment-specific settings load correctly based on DJANGO_SETTINGS_MODULE"
  artifacts:
    - path: "apps/api/manage.py"
      provides: "Django management script"
      min_lines: 10
    - path: "apps/api/config/settings/base.py"
      provides: "Shared Django settings"
      min_lines: 50
    - path: "apps/api/requirements/base.txt"
      provides: "Core Python dependencies"
      contains: "Django>=5.2"
    - path: "pyproject.toml"
      provides: "Project config with ruff settings"
      contains: "[tool.ruff]"
  key_links:
    - from: "apps/api/manage.py"
      to: "config.settings"
      via: "DJANGO_SETTINGS_MODULE"
      pattern: "DJANGO_SETTINGS_MODULE"
    - from: "apps/api/config/settings/development.py"
      to: "config.settings.base"
      via: "import"
      pattern: "from .base import"
---

<objective>
Create the foundational project structure for RESTO360 with Django 5.2 LTS backend.

Purpose: Establish a working Django project with proper settings hierarchy, dependency management, and development tooling so subsequent plans can build features on a solid foundation.

Output: A runnable Django project at `apps/api/` with environment-specific settings, pytest configuration, and ruff linting.
</objective>

<execution_context>
@C:\Users\dell\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dell\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create monorepo structure with Django project skeleton</name>
  <files>
    pyproject.toml
    apps/api/manage.py
    apps/api/config/__init__.py
    apps/api/config/settings/__init__.py
    apps/api/config/settings/base.py
    apps/api/config/settings/development.py
    apps/api/config/settings/production.py
    apps/api/config/settings/testing.py
    apps/api/config/urls.py
    apps/api/config/wsgi.py
    apps/api/config/asgi.py
    apps/api/apps/__init__.py
    .gitignore
    .env.example
  </files>
  <action>
Create monorepo directory structure:
```
RESTO360/
├── apps/
│   └── api/           # Django backend
│       ├── config/    # Django project settings
│       │   └── settings/
│       └── apps/      # Django apps (empty for now)
├── pyproject.toml     # Project-level config
├── .gitignore
└── .env.example
```

Create `pyproject.toml` with:
- Project metadata (name: resto360, version: 0.1.0)
- ruff configuration from RESEARCH.md (target-version py312, line-length 88)
- ruff lint select: E, F, I, B, C4, DJ, UP
- ruff lint isort: known-first-party = ["apps", "config"]

Create `apps/api/manage.py`:
- Standard Django manage.py
- Default DJANGO_SETTINGS_MODULE = "config.settings.development"

Create `apps/api/config/settings/base.py` with:
- DEBUG = False (overridden in development)
- SECRET_KEY from env via django-environ
- INSTALLED_APPS: django defaults + rest_framework + rest_framework_simplejwt + corsheaders
- MIDDLEWARE: SecurityMiddleware, WhiteNoise, Session, Common, Csrf, Auth, Message, ClickjackingMiddleware
- DATABASE: configure via dj-database-url from DATABASE_URL env
- PASSWORD_HASHERS: Argon2 first
- AUTH_PASSWORD_VALIDATORS: all four standard validators
- LANGUAGE_CODE = 'fr' (French primary)
- TIME_ZONE = 'Africa/Abidjan'
- USE_TZ = True
- REST_FRAMEWORK: JWTAuthentication, IsAuthenticated default, pagination
- SIMPLE_JWT config: 15min access, 7day refresh, rotate and blacklist
- CORS_ALLOW_ALL_ORIGINS = False (configure in development/production)

Create `apps/api/config/settings/development.py`:
- Import from .base import *
- DEBUG = True
- ALLOWED_HOSTS = ["localhost", "127.0.0.1"]
- CORS_ALLOW_ALL_ORIGINS = True

Create `apps/api/config/settings/production.py`:
- Import from .base import *
- DEBUG = False (hardcoded, not from env)
- ALLOWED_HOSTS from env
- CORS_ALLOWED_ORIGINS from env
- SECURE_SSL_REDIRECT = True
- SESSION_COOKIE_SECURE = True
- CSRF_COOKIE_SECURE = True

Create `apps/api/config/settings/testing.py`:
- Import from .base import *
- PASSWORD_HASHERS = ["django.contrib.auth.hashers.MD5PasswordHasher"] (fast tests)
- DEBUG = False

Create `apps/api/config/urls.py`:
- Root urlconf with admin/ and health/ endpoint
- Health endpoint returns 200 JSON {"status": "ok"}

Create `apps/api/config/wsgi.py` and `asgi.py`:
- Standard Django WSGI/ASGI applications
- Default to production settings

Create `.gitignore`:
- Python: __pycache__, *.pyc, .venv/, venv/
- Django: *.log, db.sqlite3, staticfiles/
- IDE: .idea/, .vscode/
- Env: .env, .env.local (but NOT .env.example)
- OS: .DS_Store, Thumbs.db

Create `.env.example`:
- DATABASE_URL=postgres://user:pass@localhost:5432/resto360
- SECRET_KEY=change-me-in-production
- DEBUG=true
- ALLOWED_HOSTS=localhost,127.0.0.1
- REDIS_URL=redis://localhost:6379/0
  </action>
  <verify>
    cd apps/api && python -c "import django; print(django.VERSION)"
  </verify>
  <done>
    Django project structure exists at apps/api/ with settings hierarchy
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure dependencies and development tooling</name>
  <files>
    apps/api/requirements/base.txt
    apps/api/requirements/development.txt
    apps/api/requirements/production.txt
    apps/api/requirements/testing.txt
    apps/api/pytest.ini
    apps/api/conftest.py
  </files>
  <action>
Create `apps/api/requirements/base.txt` (from RESEARCH.md):
```
Django>=5.2,<5.3
djangorestframework>=3.15,<4.0
djangorestframework-simplejwt>=5.3,<6.0
psycopg[binary]>=3.2,<4.0
django-environ>=0.11,<1.0
dj-database-url>=2.2,<3.0
django-cors-headers>=4.3,<5.0
argon2-cffi>=23.1,<24.0
whitenoise>=6.6,<7.0
gunicorn>=22.0,<23.0
redis>=5.0,<6.0
```

Create `apps/api/requirements/development.txt`:
```
-r base.txt
pytest>=8.0,<9.0
pytest-django>=4.8,<5.0
pytest-factoryboy>=2.7,<3.0
factory-boy>=3.3,<4.0
pytest-cov>=4.1,<5.0
ruff>=0.4,<1.0
mypy>=1.10,<2.0
django-stubs>=5.0,<6.0
```

Create `apps/api/requirements/production.txt`:
```
-r base.txt
sentry-sdk>=2.0,<3.0
```

Create `apps/api/requirements/testing.txt`:
```
-r development.txt
```

Create `apps/api/pytest.ini`:
```ini
[pytest]
DJANGO_SETTINGS_MODULE = config.settings.testing
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short --strict-markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
```

Create `apps/api/conftest.py`:
```python
import pytest

@pytest.fixture(scope="session")
def django_db_setup():
    """Configure test database."""
    pass

@pytest.fixture
def api_client():
    """DRF test client."""
    from rest_framework.test import APIClient
    return APIClient()
```

Install dependencies (development):
```bash
cd apps/api
pip install -r requirements/development.txt
```
  </action>
  <verify>
    cd apps/api && pip install -r requirements/development.txt && ruff check . --select E,F && pytest --collect-only
  </verify>
  <done>
    All dependencies install successfully, ruff runs without config errors, pytest discovers test configuration
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify Django project runs and create initial test</name>
  <files>
    apps/api/apps/core/__init__.py
    apps/api/apps/core/tests/__init__.py
    apps/api/apps/core/tests/test_health.py
  </files>
  <action>
Create minimal core app structure:
```
apps/api/apps/core/
├── __init__.py
└── tests/
    ├── __init__.py
    └── test_health.py
```

Create `apps/api/apps/core/tests/test_health.py`:
```python
import pytest
from django.urls import reverse
from rest_framework import status

@pytest.mark.django_db
class TestHealthEndpoint:
    def test_health_returns_ok(self, api_client):
        """Health endpoint returns 200 with status ok."""
        response = api_client.get("/health/")
        assert response.status_code == status.HTTP_200_OK
        assert response.json() == {"status": "ok"}
```

Verify the full setup:
1. Run Django check: `python manage.py check`
2. Run migrations (Django internal): `python manage.py migrate`
3. Run tests: `pytest apps/core/tests/`
4. Run linter: `ruff check .`
5. Start dev server (verify it starts): `python manage.py runserver 0.0.0.0:8000` (stop after 3 seconds)
  </action>
  <verify>
    cd apps/api && python manage.py check && pytest apps/core/tests/ -v
  </verify>
  <done>
    Django check passes, health endpoint test passes, project is fully functional
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd apps/api && python manage.py check` - No issues
2. `cd apps/api && python manage.py runserver --noreload &` then `curl http://localhost:8000/health/` returns `{"status": "ok"}`
3. `cd apps/api && pytest` - All tests pass
4. `ruff check apps/api/` - No lint errors
5. `DJANGO_SETTINGS_MODULE=config.settings.production python -c "from django.conf import settings; assert settings.DEBUG == False"` - Production settings work
</verification>

<success_criteria>
- Django 5.2 project at apps/api/ with settings hierarchy (base, development, production, testing)
- All dependencies from RESEARCH.md installed via requirements files
- Health endpoint at /health/ returns {"status": "ok"}
- pytest configured and discovers tests
- ruff configured in pyproject.toml with Django rules
- .gitignore excludes appropriate files
- .env.example documents required environment variables
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
